template#xlist-el
	style.
		.blist-el span, .blist-el li { color: orange; }
		.blist-el a { cursor: pointer; color: #2196F3}
	.blist-el
		span My List Title
		#myList

script#Lst1Tpl(type='text/x-dot-template').
	<ul>
	{{~it.array :value:index}}
		<li><a onclick="return ListEl.nav('{{=value.url}}','{{=value.circleVal}}','{{=value.gaugeVal}}')"> {{=value.head_line}}</a></li>
	{{~}}
	<ul>
script.
	//http://www.javascriptoo.com/dot-js
	var blx = null//message bus to emit/broadcast to 

	var ListEl = Object.create(HTMLElement.prototype)
	ListEl.createdCallback = function() {
		ListEl._shadow = TW.attachShadow(this, '#xlist-el')
	}//()
	TW.registerCustomElement('list-el', ListEl) //could be in the page compInit callback
	
	ListEl.list = function(values) {
		console.log('ListEl.list')
		const tpl = document.getElementById('Lst1Tpl').text
		var data2 = {'array': values}
		var res = TW.bind(tpl, data2)
		//console.log(res)
		const lst = ListEl._shadow.querySelector('#myList') 
		lst.innerHTML = res

		$("#myList", ListEl._shadow).append("<span id='list-ready'></span>")// SSR MAGIC!!
	}//()

	ListEl.init = function(_blx) {
		console.log('ListEl.init, received _blx')
		blx = _blx //used in ListEl.nav
		//if you have a DOM button, this is how you can register it to send the click event
		//const $button1 = $('#button1', ListEl._shadow)
		//onst clicks = flyd.stream()
		//button1.on('click', clicks)
		//blx.regObserver('mySelection', clicks)
		
	}//()

	ListEl.nav = function(url, circleVal, gaugeVal){
		if (blx != null) //blx not required when component doesn't broadcast
			blx.emit('mySelection', {"circleVal": circleVal, "gaugeVal": gaugeVal})
		else 
			window.open(url, "_blank")
		return false;			
	}


